{"version":3,"sources":["../../../../app/admin/dashboard/page.tsx"],"sourcesContent":["import { prisma } from '@/lib/db';\nimport { createTenantAction, deleteTenantAction, updateTenantAction } from '@/app/actions/adminTenant';\nimport { logoutAction } from '@/app/actions/adminAuth';\nimport { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\n\nexport default async function AdminDashboard() {\n    const cookieStore = await cookies();\n    if (!cookieStore.get('admin_session')) {\n        redirect('/admin/login');\n    }\n\n    const tenants = await prisma.tenant.findMany({\n        include: { devices: true },\n        orderBy: { createdAt: 'desc' }\n    });\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <nav className=\"bg-white shadow p-4 flex justify-between items-center\">\n                <h1 className=\"text-xl font-bold\">Admin Dashboard</h1>\n                <form action={logoutAction}>\n                    <button className=\"text-red-600 hover:text-red-800\">Logout</button>\n                </form>\n            </nav>\n\n            <main className=\"max-w-6xl mx-auto p-8\">\n                <div className=\"bg-white p-6 rounded shadow mb-8\">\n                    <h2 className=\"text-lg font-semibold mb-4\">Create New Tenant</h2>\n                    <form action={createTenantAction} className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                        <input name=\"name\" placeholder=\"Tenant Name\" required className=\"border p-2 rounded\" />\n                        <input name=\"slug\" placeholder=\"URL Slug\" required className=\"border p-2 rounded\" />\n                        <input name=\"nasIds\" placeholder=\"NAS IDs (comma separated)\" className=\"border p-2 rounded\" />\n                        <button className=\"bg-green-600 text-white p-2 rounded hover:bg-green-700\">Create</button>\n                    </form>\n                </div>\n\n                <div className=\"grid gap-6\">\n                    {tenants.map(tenant => (\n                        <div key={tenant.id} className=\"bg-white p-6 rounded shadow relative\">\n                            <form action={deleteTenantAction} className=\"absolute top-4 right-4\">\n                                <input type=\"hidden\" name=\"id\" value={tenant.id} />\n                                <button className=\"text-red-500 hover:text-red-700 text-sm\">Delete</button>\n                            </form>\n\n                            <form action={updateTenantAction} className=\"space-y-4\">\n                                <input type=\"hidden\" name=\"id\" value={tenant.id} />\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                    <div>\n                                        <label className=\"block text-xs uppercase text-gray-500 mb-1\">Name</label>\n                                        <input name=\"name\" defaultValue={tenant.name} className=\"w-full border p-2 rounded\" />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-xs uppercase text-gray-500 mb-1\">Slug</label>\n                                        <input name=\"slug\" defaultValue={tenant.slug} className=\"w-full border p-2 rounded\" />\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"block text-xs uppercase text-gray-500 mb-1\">NAS IDs (Comma Separated)</label>\n                                    <input\n                                        name=\"nasIds\"\n                                        defaultValue={tenant.devices.map(d => d.nasId).join(', ')}\n                                        className=\"w-full border p-2 rounded font-mono text-sm\"\n                                    />\n                                </div>\n                                <div className=\"flex justify-end\">\n                                    <button className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm\">Update</button>\n                                </div>\n                            </form>\n                        </div>\n                    ))}\n                    {tenants.length === 0 && <p className=\"text-gray-500 text-center\">No tenants found.</p>}\n                </div>\n            </main>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}