{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivanmuccini/Apps/Antigravity/chat/chat/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as {\n    prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivanmuccini/Apps/Antigravity/chat/chat/app/actions/adminTenant.ts"],"sourcesContent":["'use server';\n\nimport { prisma } from '@/lib/db';\nimport { revalidatePath } from 'next/cache';\n\nexport async function createTenantAction(formData: FormData) {\n    const name = formData.get('name') as string;\n    const slug = formData.get('slug') as string;\n    const nasIds = (formData.get('nasIds') as string).split(',').map(s => s.trim()).filter(Boolean);\n    const publicIps = (formData.get('publicIps') as string || \"\").split(',').map(s => s.trim()).filter(Boolean);\n\n    await prisma.tenant.create({\n        data: {\n            name,\n            slug,\n            devices: {\n                create: [\n                    ...nasIds.map(nasId => ({ nasId })),\n                    ...publicIps.map(ip => ({ publicIp: ip }))\n                ]\n            }\n        }\n    });\n    revalidatePath('/admin/dashboard');\n}\n\nexport async function updateTenantAction(formData: FormData) {\n    const id = formData.get('id') as string;\n    const name = formData.get('name') as string;\n    const slug = formData.get('slug') as string;\n    const nasIds = (formData.get('nasIds') as string).split(',').map(s => s.trim()).filter(Boolean);\n    const publicIps = (formData.get('publicIps') as string || \"\").split(',').map(s => s.trim()).filter(Boolean);\n\n    // Update basic info\n    await prisma.tenant.update({\n        where: { id },\n        data: { name, slug }\n    });\n\n    // Sync devices: Delete all and recreate\n    await prisma.nasDevice.deleteMany({ where: { tenantId: id } });\n\n    const devicesToCreate = [\n        ...nasIds.map(nasId => ({ nasId, tenantId: id })),\n        ...publicIps.map(ip => ({ publicIp: ip, tenantId: id }))\n    ];\n\n    if (devicesToCreate.length > 0) {\n        await prisma.nasDevice.createMany({\n            data: devicesToCreate\n        });\n    }\n\n    revalidatePath('/admin/dashboard');\n}\n\nexport async function deleteTenantAction(formData: FormData) {\n    const id = formData.get('id') as string;\n    await prisma.tenant.delete({ where: { id } });\n    revalidatePath('/admin/dashboard');\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;AAEO,eAAe,mBAAmB,QAAkB;IACvD,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,SAAS,AAAC,SAAS,GAAG,CAAC,UAAqB,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;IACvF,MAAM,YAAY,CAAC,SAAS,GAAG,CAAC,gBAA0B,EAAE,EAAE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;IAEnG,MAAM,mHAAM,CAAC,MAAM,CAAC,MAAM,CAAC;QACvB,MAAM;YACF;YACA;YACA,SAAS;gBACL,QAAQ;uBACD,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;4BAAE;wBAAM,CAAC;uBAC9B,UAAU,GAAG,CAAC,CAAA,KAAM,CAAC;4BAAE,UAAU;wBAAG,CAAC;iBAC3C;YACL;QACJ;IACJ;IACA,IAAA,+IAAc,EAAC;AACnB;AAEO,eAAe,mBAAmB,QAAkB;IACvD,MAAM,KAAK,SAAS,GAAG,CAAC;IACxB,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,MAAM,SAAS,AAAC,SAAS,GAAG,CAAC,UAAqB,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;IACvF,MAAM,YAAY,CAAC,SAAS,GAAG,CAAC,gBAA0B,EAAE,EAAE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;IAEnG,oBAAoB;IACpB,MAAM,mHAAM,CAAC,MAAM,CAAC,MAAM,CAAC;QACvB,OAAO;YAAE;QAAG;QACZ,MAAM;YAAE;YAAM;QAAK;IACvB;IAEA,wCAAwC;IACxC,MAAM,mHAAM,CAAC,SAAS,CAAC,UAAU,CAAC;QAAE,OAAO;YAAE,UAAU;QAAG;IAAE;IAE5D,MAAM,kBAAkB;WACjB,OAAO,GAAG,CAAC,CAAA,QAAS,CAAC;gBAAE;gBAAO,UAAU;YAAG,CAAC;WAC5C,UAAU,GAAG,CAAC,CAAA,KAAM,CAAC;gBAAE,UAAU;gBAAI,UAAU;YAAG,CAAC;KACzD;IAED,IAAI,gBAAgB,MAAM,GAAG,GAAG;QAC5B,MAAM,mHAAM,CAAC,SAAS,CAAC,UAAU,CAAC;YAC9B,MAAM;QACV;IACJ;IAEA,IAAA,+IAAc,EAAC;AACnB;AAEO,eAAe,mBAAmB,QAAkB;IACvD,MAAM,KAAK,SAAS,GAAG,CAAC;IACxB,MAAM,mHAAM,CAAC,MAAM,CAAC,MAAM,CAAC;QAAE,OAAO;YAAE;QAAG;IAAE;IAC3C,IAAA,+IAAc,EAAC;AACnB;;;IAvDsB;IAqBA;IA8BA;;AAnDA,+OAAA;AAqBA,+OAAA;AA8BA,+OAAA"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/ivanmuccini/Apps/Antigravity/chat/chat/.next-internal/server/app/admin/%28authenticated%29/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {deleteTenantAction as '40c050bf77f2896f4527a748e19af19c5226df4064'} from 'ACTIONS_MODULE0'\nexport {createTenantAction as '40d7d6cc51d97c2551b22a9a4cb62656e69da719f9'} from 'ACTIONS_MODULE0'\nexport {updateTenantAction as '40bdb7c9865e96a390e2546499f14eca46e340eb79'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}